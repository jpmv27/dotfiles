#!/bin/env bash

set -o errexit
set -o pipefail
set -o nounset

readonly BUILD_ME_CONFIG="$HOME/.build_me"

path="$(pwd)"

until [[ -z "$path" || -x "$(readlink -f "$BUILD_ME_CONFIG/$path/build")" ]]; do
    path="${path%/*}"
done

if [ -z "$path" ]; then
    echo "I don't know how to build this project"
    exit 200
fi

cd "$path"
"$BUILD_ME_CONFIG/$path/build" "$@"

